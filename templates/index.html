{% extends 'index_base.html' %}
{% block ShowContent %}
    <div class="article-list">
        {% for row in article_list %}
            <div class="article-item clearfix">
                <h3><a href="{{ row.blog.site }}/{{ row.nid }}/">{{ row.title }}</a></h3>
                <div class="clearfix">
                    <a class="avatar left" href="#">
                        <img src={{ row.blog.user.avatar }}>
                    </a>
                    {{ row.content }}
                </div>
                <div class="footers" id="{{ row.nid }}">
                    <a href="{{ row.blog.site }}/">
                        <i class="fa fa-user-o" aria-hidden="true"></i>
                        <span>{{ row.blog.user.nickname }}</span>
                    </a>
                    <span>发布于 {{ row.create_time|date:"Y-m-d H:i:s" }}</span>
                    <a class="ele">
                        <i class="fa fa-commenting-o" aria-hidden="true"></i>
                        <span>{{ row.comment_count }}</span>
                    </a>
                    <a class="ele">
                        <i class="fa fa-thumbs-o-up" aria-hidden="true"></i>
                        <span>{{ row.up_count }}</span>
                    </a>
                </div>

            </div>
        {% endfor %}

    </div>

    <div class="clearfix">

        <ul class="pagination">
            {{ page_str }}
        </ul>

    </div>
{% endblock %}
{% block javascript %}
    <script src="/static/js/updown.js"></script>
    <script>
        $(function () {
            /*
            var that = null;
            $('.fa-thumbs-o-up').parent().click(function () {
                that = this;
                var nid = $(this).parent().attr('id');
                $.ajax({
                    url:'/backend/up/',
                    type:'GET',
                    data:{'nid':nid},
                    dataType:'JSON',
                    success:function (arg) {
                        if(arg.status){
                            UpCount(that);
                        }
                        else {
                            DownCount(that)
                        }
                    }
                });
            });
            function UpCount(ths) {
                var fontSize = 15;
                var top = 0;
                var right = 0;
                var opacity = 1;

                var tag = document.createElement('span');
                $(tag).text('+1');
                $(tag).css('color', 'green');
                $(tag).css('position', 'absolute');
                $(tag).css('fontSize', fontSize + "px");
                $(tag).css('right', right + "px");
                $(tag).css('top', top + 'px');
                $(tag).css('opacity', opacity);
                $(ths).append(tag);

                var a = $(ths).children().first().next();
                a.text(parseInt(a.text()) + 1);
                $(ths).css('color', 'green');

                var obj = setInterval(function () {
                    fontSize = fontSize + 8;
                    top = top - 10;
                    right = right - 10;
                    opacity = opacity - 0.1;

                    $(tag).css('fontSize', fontSize + "px");
                    $(tag).css('right', right + "px");
                    $(tag).css('top', top + 'px');
                    $(tag).css('opacity', opacity);
                    if (opacity < 0) {
                        clearInterval(obj);
                        $(tag).remove();
                    }
                }, 40);
            }
            function DownCount(ths) {
                var fontSize = 15;
                var top = 0;
                var right = 0;
                var opacity = 1;

                var tag = document.createElement('span');
                $(tag).text('-1');
                $(tag).css('color','gray');
                $(tag).css('position','absolute');
                $(tag).css('fontSize',fontSize + "px");
                $(tag).css('right',right + "px");
                $(tag).css('top',top + 'px');
                $(tag).css('opacity',opacity);
                $(ths).append(tag);

                var a = $(ths).children().first().next();
                a.text(parseInt(a.text())-1);
                $(ths).css('color','gray');

                var obj = setInterval(function () {
                    fontSize = fontSize + 8;
                    top = top - 10;
                    right = right - 10;
                    opacity = opacity - 0.1;

                    $(tag).css('fontSize',fontSize + "px");
                    $(tag).css('right',right + "px");
                    $(tag).css('top',top + 'px');
                    $(tag).css('opacity',opacity);
                    if(opacity < 0){
                        clearInterval(obj);
                        $(tag).remove();
                    }
                }, 40);
            }
            */
            $.UpDown('/up/');
        });

    </script>
{% endblock %}

